import{globby as l,path as c,hash as f}from"vuepress/utils";import{watch as u}from"chokidar";const a=async({componentsDir:o,componentsPatterns:e,getComponentName:t})=>{if(!o)return{};const i=await l(e,{cwd:o});return Object.fromEntries(i.map(n=>[t(n),c.resolve(o,n)]))},s=async(o,e,t)=>{const i={...await a(e),...e.components},n=`import { defineAsyncComponent } from 'vue'

export default {
  enhance: ({ app }) => {    ${Object.entries(i).map(([p,r])=>`
      app.component(${JSON.stringify(p)}, defineAsyncComponent(() => import(${JSON.stringify(r)})))`).join(`
    `)}
  },
}
`;return o.writeTemp(`register-components/clientConfig.${t}.js`,n)},C=({components:o={},componentsDir:e=null,componentsPatterns:t=["**/*.vue"],getComponentName:i=n=>c.trimExt(n.replace(/\/|\\/g,"-"))}={})=>{const n={components:o,componentsDir:e,componentsPatterns:t,getComponentName:i},p=f(n);return{name:"@vuepress/plugin-register-components",multiple:!0,clientConfigFile:r=>s(r,n,p),onWatched:(r,g)=>{if(e){const m=u(t,{cwd:e,ignoreInitial:!0});m.on("add",()=>{s(r,n,p)}),m.on("unlink",()=>{s(r,n,p)}),g.push(m)}}}};export{a as getComponentsFromDir,s as prepareClientConfigFile,C as registerComponentsPlugin};
//# sourceMappingURL=index.js.map
